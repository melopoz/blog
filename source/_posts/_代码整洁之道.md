---
title: clean code
tags: clean code
categories: other
date: 2021/06/27 13:00
updated: 2021/06/27 13:00
---



## 带着问题去看《clean code》

代码整洁 体现在哪些方面？

> 错误处理、边界问题
>
> 命名、函数、注释、代码格式、对象和数据结构、单元测试、类、系统、并发编程
>
> [《代码整洁之道》中作者描述的几个方面]

那有什么抓手呢？比如从哪里开始行动？哪些情况应该怎么做？什么时候就说明这代码需要重构了？重构有没有什么标准？

> ~~**整理**：恰当的命名。~~
>
> ~~**清洁**：标准化，一组人都遵循一个规则（不至于用代码风格来形容，但能统一更好的）结合一些情况来看，没啥必要，~~
>
> **整顿**：你希望在这里用到一段代码的时候，他就应该在。否则就是该重构了。
>
> **清楚**：不重要但是又好像有点作用的代码，比如 某方案2代码一直躺在注释中 ，那就直接干掉吧。 
>
> > 当初都能写出来，下次还能，如果说为了提醒以后自己，可能将来用到这个方案的时候需求已经变了，你再去读懂那个旧方案的来龙去脉，不一定能提升效率（毕竟你不敢直接用，还是要捋捋的）。
>
> **身美**：各种谚语吧，各种谁都懂得大道理，注意细节(一张脏乱的桌子会夺去一所丽宅的光彩)，一开始就做好(不生病好过治病)。

举例说明！



### 整理：命名

不止是变量命名、类命名，他们可能要考虑一些业务上的命名，比如

case0：当初分销的需求，account 应该是账号还是销售，一开始产品总说是 销售，我一直感觉这块的界限不够清晰，最后才总结出一个分类：

> 账号：1）销售a)顾问b)经理   2）管理员(我们内部的运营)

### 清洁：标准化 一组人尽量一致

当前的情况肯定是人员流动比较多，而且不同代码可能在性能上没啥差异，在没有代码行控制的情况下，大家都能看懂就行了，不然还是徒增烦恼，让大家每写一行代码都要多纠结一些问题。

> 在之前的岗位上，就是 绩效看代码行，但是还要过cr，哈哈。

### 清楚：主要就是变量命名吧

todo ： 几种变量命名法





就看个序章 就有这么多感触？？            -- 2021.6.27

---

## 我想补充的点：

### 注释

用的既然是java ，为什么要用java？因为直接写业务，开发效率高，所以我其实最希望看到的代码是：

> 在最明显的调用链路或接口中(如 controller)没有(多余的)注释，因为变量和方法命名直接见名知意，大不了点进去看一眼到底是什么具体方法。
>
> 真正需要注释的地方是 在开发效率和设计的时候，总要做取舍，代码中可能有些时候会出现一些没必要放到配置中的魔法值，这时候就需要注释一下为什么用这个值；或者这段逻辑看起来很奇怪，有一些出口(return / throw)很隐蔽且处理方式诡异，也需要注释标明一下，不然谁看到这代码都会：？？这干啥呢？

### 重构的风险

**重构**并不像重新**开发**，这两件事的风险完全不一样，开发要是没能完成，延期了。。重构没能完成，只能是这段时间没有直接产出，那段代码虽然让自己厌恶但还能用。

因为我经历过一次在测试阶段重构(... ...)，这种程度我觉得就算重构了。



## 整洁代码重要吗？

重要，你不写清楚点就会给自己埋坑啊对吧。

那写整洁就需要更多的时间来决策、设计，开发效率就会降低啊。

那就pk，因为you are coder，你比任何人都了解怀代码的危害和风险，他们可以为了期限争取，你也可以为了代码的稳定健壮而据理力争！



## 什么是整洁代码

1. 逻辑简单直接，只干一件事；
2. 减少依赖便于维护；
3. **性能最优**，因为性能不好就可能需要改动优化，改动就会有风险，尤其是当这段代码变成老代码之后，再来优化。。想想这个感觉熟不熟悉？
4. 当你想优化这段代码的时候，发现无论怎么优化，最后还是这段代码的样子。。
5. 方法做的事情一定要对应上方法名！





# 举例：

```java
void func(Object arg1) {
	if (condition1) {
        funcA();
        if (condition2) {
            funcB();
            if (condition3) {
                funcC();
            }
        }
    }
}
```

直接return，省的缩进好多层，反正后边都没有要执行的代码了，那就直接return好了。

不然如果代码很多行，一个if都要下拉才能看到当前这个情况是执行的什么代码，反过来在看代码的时候想再看一下当前是什么condition来着，还要划回去。。

总会有单线程面向过程的地方，及时表示出”这种情况下代码就执行完了“  应该会让这代码读起来 简单很多。

```java
void func(Object arg1) {
    if (!condition1) return;
    funcA();
    if (!condition2) return;
    funcB();
    if (condition3)
        funcC();
}
```





# 标准列举

## 命名

命名其实更像是一个语文的话题。哦或者说英语。

1. 大写字母O，数字0、1，小写字母l，这些坑人的写法就不用说了，更不用提全角半角了；

2. 一些常见词的用法

   > info：如果单独使用 xxBaseInfo，获取枚举的集合以加载元数据，没啥问题，但如果真的是作为元数据，其实可以叫mateData。。
   >
   > 如果跟在一个业务名词后边，就累赘了，如 accountInfo，账号信息，其实和account没区别。如果区分两个类的字段多少(或者说详细)，可以用detail对吧。

3. `IAccountService + AccountService` 和 `AccountService + AccountServiceImpl`，相比 我认为后者更好，因为接口是暴露出去的那个，应该更精简规范。

4. 大胆使用一些计科、软件、算法、模式名等术语，毕竟程序员才会来读代码。比如常见的xxFactory。

